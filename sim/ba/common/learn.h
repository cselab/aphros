
#define DIM (9)  // input dimension
#define SW (1)    // stencil half-width
#define H0 (10)
#define H1 (10)
#define HM (10)

#include <tgmath.h>

static double Sig(double x) {
  return 1. / (1. + exp(-x));
}

static double Eval(const double u[]) {
  static const double a0[] = {
    0.22648198902606964111,
    -0.54637134075164794922,
    1.8160926103591918945,
    7.9898214340209960938,
    -9.7258853912353515625,
    -9.3400592803955078125,
    9.160797119140625,
    -0.33818230032920837402,
    2.4376580715179443359,
    -3.5421850681304931641,
    -4.6099390983581542969,
    -5.0069942474365234375,
    5.9680113792419433594,
    7.3292727470397949219,
    4.3148274421691894531,
    -1.8837262392044067383,
    -2.8482761383056640625,
    -1.3365261554718017578,
    2.8557293415069580078,
    -3.1449489593505859375,
    -2.6164004802703857422,
    1.3774197101593017578,
    -4.6511321067810058594,
    -1.8838069438934326172,
    4.8717646598815917969,
    1.3246788978576660156,
    1.3023595809936523438,
    -1.3293437957763671875,
    -1.6205289363861083984,
    -1.1336388587951660156,
    -0.28918543457984924316,
    -1.2347927093505859375,
    4.704189300537109375,
    3.7007305622100830078,
    0.92640554904937744141,
    -7.8526244163513183594,
    -3.0749650001525878906,
    -2.5342414379119873047,
    -1.6665911674499511719,
    7.1889004707336425781,
    7.4656925201416015625,
    -0.12056873738765716553,
    -5.9908699989318847656,
    -4.6749186515808105469,
    -0.87056154012680053711,
    3.2446956634521484375,
    0.32637655735015869141,
    1.3567359447479248047,
    -4.3108763694763183594,
    -2.0427882671356201172,
    -2.2806904315948486328,
    2.257965087890625,
    -2.4746680259704589844,
    -3.9866743087768554688,
    2.8169465065002441406,
    -255.47454833984375,
    -5.6604290008544921875,
    -75.3777008056640625,
    -0.27148377895355224609,
    2.1765584945678710938,
    -10.093602180480957031,
    -4.9230513572692871094,
    3.1071629524230957031,
    -4.0745077133178710938,
    -2.8579583168029785156,
    -2.8619232177734375,
    15.265367507934570312,
    8.1462068557739257812,
    3.0034568309783935547,
    -6.3425054550170898438,
    -4.9633550643920898438,
    -2.3003184795379638672,
    -41.087589263916015625,
    -44.3360137939453125,
    -12.305330276489257812,
    -43.20006561279296875,
    10.376194953918457031,
    -7.9292731285095214844,
    -3.8505675792694091797,
    -1.2996925115585327148,
    0.093788132071495056152,
    -1.2749422788619995117,
    -2.3476934432983398438,
    -1.5596257448196411133,
    -3.1764810085296630859,
    2.6478335857391357422,
    4.787166595458984375,
    -3.0682170391082763672,
    -0.98142594099044799805,
    -0.1863234788179397583
  };
  static const double b0[] = {
    2.1218280792236328125,
    0.22190611064434051514,
    1.0282409191131591797,
    1.3874280452728271484,
    2.0034008026123046875,
    0.0019399332813918590546,
    -2.2214829921722412109,
    0.57560455799102783203,
    2.9654343128204345703,
    2.1968755722045898438
  };
  static const double a1[] = {
    -4.0340542793273925781,
    -25.170255661010742188,
    1.2520319223403930664,
    -1.3990797996520996094,
    -2.9984579086303710938,
    -5.7580933570861816406,
    25.195926666259765625,
    0.52330940961837768555,
    -5.4653592109680175781,
    -1.5763950347900390625,
    3.1098628044128417969,
    -1.9014658927917480469,
    -5.7368092536926269531,
    -0.74051511287689208984,
    -3.3554942607879638672,
    0.48471918702125549316,
    -37.5700531005859375,
    -0.44449275732040405273,
    5.2228293418884277344,
    -5.5210804939270019531,
    10.528668403625488281,
    -1.1198000907897949219,
    1.4541151523590087891,
    0.10785640031099319458,
    -1.1030217409133911133,
    19.1384735107421875,
    2.4928534030914306641,
    -5.8277235031127929688,
    -30.045675277709960938,
    -1.2748900651931762695,
    -1.7327097654342651367,
    -7.5667614936828613281,
    1.8646833896636962891,
    -8.3855533599853515625,
    1.2394366264343261719,
    -62.944538116455078125,
    6.02321624755859375,
    0.69773536920547485352,
    -3.0915992259979248047,
    -3.1659789085388183594,
    -3.990360260009765625,
    -5.3303632736206054688,
    -3.0828564167022705078,
    3.5857453346252441406,
    -0.081280097365379333496,
    25.515687942504882812,
    -13.566257476806640625,
    0.35044205188751220703,
    -116.06203460693359375,
    -1.5815215110778808594,
    5.9202480316162109375,
    -1.6086747646331787109,
    -3.9268233776092529297,
    1.953965306282043457,
    -8.0608673095703125,
    20.03591156005859375,
    12.685407638549804688,
    0.163469657301902771,
    -4.116607666015625,
    -5.917938232421875,
    23.300043106079101562,
    -2.0639247894287109375,
    -6.7246532440185546875,
    -0.3568159639835357666,
    -14.509009361267089844,
    -21.644245147705078125,
    17.348056793212890625,
    -7.2902817726135253906,
    -21.28273773193359375,
    -2.8234436511993408203,
    0.78134357929229736328,
    0.79820114374160766602,
    2.3944242000579833984,
    0.76217162609100341797,
    4.7203431129455566406,
    13.700114250183105469,
    -0.029521111398935317993,
    -1.3171770572662353516,
    0.11530258506536483765,
    -1.2267742156982421875,
    0.64468932151794433594,
    2.6169745922088623047,
    4.1597580909729003906,
    2.0256419181823730469,
    1.0671589374542236328,
    4.7922549247741699219,
    -0.27217140793800354004,
    0.69523149728775024414,
    -166.46075439453125,
    -5.7463879585266113281,
    -18.315130233764648438,
    -4.3138217926025390625,
    3.5003609657287597656,
    -6.8253383636474609375,
    -5.4258475303649902344,
    11.313543319702148438,
    -0.35826408863067626953,
    5.0849728584289550781,
    -93.4815673828125,
    -2.5940458774566650391
  };
  static const double b1[] = {
    -1.0609716176986694336,
    -0.65721678733825683594,
    1.1050931215286254883,
    -1.1623010635375976562,
    -0.85202509164810180664,
    2.4646210670471191406,
    0.78064060211181640625,
    -3.7483704090118408203,
    -2.4931206703186035156,
    -1.0190025568008422852
  };
  static const double a2[] = {
    -4.0232939720153808594,
    -2.9620447158813476562,
    -0.57457727193832397461,
    -7.7184352874755859375,
    -2.3192243576049804688,
    -0.72194916009902954102,
    -0.18272455036640167236,
    1.9089547395706176758,
    -0.61838561296463012695,
    -2.6819252967834472656
  };
  static const double b2[] = {
    0.19598224759101867676
  };


  double w[HM];
  double o[HM];
  for (int i = 0; i < H0; ++i) {
    o[i] = b0[i];
    for (int j = 0; j < DIM; ++j) {
      o[i] += a0[i * DIM + j] * u[j];
    }
  }

  for (int i = 0; i < H0; ++i) {
    w[i] = Sig(o[i]);
  }
  for (int i = 0; i < H1; ++i) {
    o[i] = b1[i];
    for (int j = 0; j < H0; ++j) {
      o[i] += a1[i * H0 + j] * w[j];
    }
  }


  for (int i = 0; i < H1; ++i) {
    w[i] = Sig(o[i]);
  }
  for (int i = 0; i < 1; ++i) {
    o[i] = b2[i];
    for (int j = 0; j < H1; ++j) {
      o[i] += a2[j] * w[j];
    }
  }

  return o[0];
}


/*
#include <stdio.h>

int main() {
  static const double u[] = {
    0.1915194503788922864,
    0.62210877103983186487,
    0.43772773900711448025,
    0.78535858371376920939,
    0.77997580811880351526,
    0.27259260528264162016,
    0.27646425514309669325,
    0.80187217753501927042,
    0.95813935368370517498
  };

  double e = Eval(u);
  printf("c     : %.30g\n", e);
}
*/

