get_filename_component(name ${CMAKE_CURRENT_SOURCE_DIR} NAME)

foreach(DIM RANGE 2 4)
  set(T t.${name}_${DIM}d)
  add_executable(${T} main.cpp)
  target_compile_options(${T} PRIVATE -DDIM=${DIM})
  target_link_libraries(${T} mesh suspender format)
  add_test_current(NAME ${DIM}d COMMAND ./test ${DIM}d)
endforeach()
