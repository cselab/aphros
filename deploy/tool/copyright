#!/bin/sh

set -eu

file=$1

if [ -z `git ls-files "$file"` ] ; then
  echo "File '$file' not found in index" 1>&2
  exit 1
fi

rev=$(git log --follow --pretty=%H -- "$file" | tail -n 1)
git=`git log --date=format:'%d.%m.%Y' "$rev" | head -n3`
author=`echo "$git" | sed -En 's/.*Author: (.*?) <.*/\1/p'`
date=`echo "$git" | sed -En 's/.*Date:   (.*?)/\1/p'`
year=`echo "$date" | sed -En 's/[0-9]*\.[0-9]*\.([0-9]*)/\1/p'`

cat << EOF
// Created by $author on $date
// Copyright $year ETH Zurich
EOF
