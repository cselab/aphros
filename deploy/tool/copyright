#!/bin/sh

set -eu

file=$1

if [ -z `git ls-files "$file"` ] ; then
  echo "File '$file' not found in index" 1>&2
  exit 1
fi


git=`git log --date=format:'%d.%m.%Y' --reverse -- "$file" | head -n3`
author=`sed -En 's/.*Author: (.*?) <.*/\1/p' <<< "$git"`
date=`sed -En 's/.*Date:   (.*?)/\1/p' <<< "$git"`
year=`sed -En 's/[0-9]*\.[0-9]*\.([0-9]*)/\1/p' <<< "$date"`

cat << EOF
// Created by $author on $date
// Copyright $year ETH Zurich
EOF
